---
import db from "../../lib/db.js";
const result = await db.query("SELECT id, titulo, autor, isbn FROM libros LIMIT 20"); // o seg√∫n filtros
const libros = result.rows;
---

<style>
  .etiqueta {
    border: 1px solid #ccc;
    padding: 1rem;
    margin: 0.5rem;
    display: inline-block;
    width: 250px;
    height: 120px;
    font-family: Arial, sans-serif;
    font-size: 12px;
    text-align: center;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
  }
  .barcode {
    font-size: 24px;
    margin: 0.5rem 0;
  }
  @media print {
    body { background: white; }
    button { display: none; }
  }
</style>

<div>
  <h2>Etiquetas de c√≥digos de barras</h2>
  <button onclick="window.print()">üñ®Ô∏è Imprimir etiquetas</button>
  <div style="display: flex; flex-wrap: wrap;">
    {libros.map(libro => (
      <div class="etiqueta">
        <strong>{libro.titulo}</strong><br />
        <em>{libro.autor}</em><br />
        <div class="barcode">*{libro.isbn || libro.id}*</div>
        <small>ISBN: {libro.isbn}</small>
      </div>
    ))}
  </div>
</div>

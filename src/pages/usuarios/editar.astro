---
import '../../styles/tailwind.css';
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Usuario</title>
  </head>
  <body class="bg-gradient-to-b from-[#f4f4f2] to-[#eae7dc] min-h-screen font-sans text-gray-800">

    <!-- Encabezado -->
    <header class="bg-[#1e3a5f] text-white py-6 px-8 shadow-md fixed w-full z-30">
      <div class="max-w-7xl mx-auto">
        <h1 class="text-4xl font-bold tracking-tight flex items-center gap-3">
          ‚úèÔ∏è Editar Usuario
        </h1>
        <p class="text-sm mt-1 text-[#e0e0e0]">Modificar datos de un usuario existente</p>
      </div>
    </header>

    <main class="flex justify-center items-center min-h-screen pt-32 px-4">
      <div class="bg-white w-full max-w-2xl rounded-2xl shadow-2xl p-10 relative border border-gray-200 transition-all duration-300">

        <!-- Encabezado del formulario -->
        <div class="mb-8 flex items-center gap-4 border-b border-[#cbb26a] pb-4">
          <span class="text-4xl text-[#1e3a5f]">üìã</span>
          <h2 class="text-3xl font-semibold text-[#1e3a5f]">Editar Usuario</h2>
        </div>

        <!-- Formulario -->
        <form id="editForm" action="/api/editar_usu" class="space-y-6">
          <div>
            <label for="id" class="block text-sm font-medium text-gray-700 mb-1">ID del Usuario</label>
            <input type="number" id="id" name="id" required
              class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-[#cbb26a] focus:ring-2 focus:outline-none transition" />
          </div>

          <div>
            <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
            <input type="text" id="nombre" name="nombre" required
              class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-[#cbb26a] focus:ring-2 focus:outline-none transition" />
          </div>

          <div>
            <label for="correo" class="block text-sm font-medium text-gray-700 mb-1">Correo</label>
            <input type="email" id="correo" name="correo" required
              class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-[#cbb26a] focus:ring-2 focus:outline-none transition" />
          </div>

          <div class="pt-4">
            <button type="submit"
              class="w-full bg-[#1e3a5f] hover:bg-[#142c4b] text-white font-semibold px-6 py-3 rounded-md shadow-md transition duration-200">
              üîÑ Actualizar Usuario
            </button>
          </div>
        </form>

        <!-- Mensaje -->
        <div id="mensaje" class="mt-4 text-center text-sm font-medium text-red-600"></div>
      </div>
    </main>

    <!-- Script -->
    <script type="module">
      document.getElementById('editForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const id = document.getElementById('id').value;
        const nombre = document.getElementById('nombre').value;
        const correo = document.getElementById('correo').value;

        try {
          const res = await fetch('/api/editar_usu', {
            method: 'PUT',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ id: parseInt(id), nombre, correo })
          });

          const data = await res.json();
          document.getElementById('mensaje').textContent = data.mensaje || data.error;
        } catch (err) {
          document.getElementById('mensaje').textContent = 'Error al enviar los datos';
          console.error(err);
        }
      });
    </script>
  </body>
</html>
